<!-- Файл: Views/MainView.xaml -->
<!-- Описание: Главное окно с TabControl, который динамически создает вкладки на основе коллекции в MainViewModel. -->
<Window x:Class="RepairServiceAppMVVM.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:RepairServiceAppMVVM.Views"
        xmlns:vm="clr-namespace:RepairServiceAppMVVM.ViewModels"
        mc:Ignorable="d"
        Title="RepairServiceApp - Система управления ремонтами (MVVM)"
        Height="700" Width="1200"
        MinHeight="600" MinWidth="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F0F2F5"
        FontFamily="Segoe UI">
    <Window.Resources>
        <!-- Здесь мы говорим WPF: "Если встретишь DashboardViewModel, нарисуй для него DashboardView" -->
        <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
            <local:DashboardView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:RepairsViewModel}">
            <local:RepairsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ClientsViewModel}">
            <local:ClientsView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:DevicesViewModel}">
            <local:DevicesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ServicesViewModel}">
            <local:ServicesView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:UsersViewModel}">
            <local:UsersView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ReportsViewModel}">
            <local:ReportsView/>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Шапка с информацией о пользователе -->
        <Border Grid.Row="0" Background="#007ACC" Padding="15" Margin="0,0,0,5" CornerRadius="0,0,15,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="RepairServiceApp" Grid.Column="0" Foreground="White" FontSize="28" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,20,0"/>
                <TextBlock Text="{Binding UserInfo}" Grid.Column="2" Foreground="#DDDDDD" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            </Grid>
        </Border>

        <!-- Основной контент: TabControl -->
        <TabControl Grid.Row="1" Margin="10" Background="Transparent" BorderThickness="0"
                    ItemsSource="{Binding TabViewModels}"
                    SelectedItem="{Binding SelectedViewModel}">
            <TabControl.ItemTemplate>
                <!-- Этот шаблон определяет, как будет выглядеть заголовок вкладки -->
                <DataTemplate>
                    <TextBlock Text="{Binding DisplayName}" FontSize="16" FontWeight="SemiBold" Padding="10,5"/>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplate>
                <!-- Этот шаблон определяет, как будет выглядеть содержимое вкладки -->
                <DataTemplate>
                    <ContentPresenter Content="{Binding}"/>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>
    </Grid>
</Window>
